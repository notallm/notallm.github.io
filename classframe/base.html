<!DOCTYPE html>
<html lang = "en">
<head>
    <meta charset = "utf-8">
    <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
    <link href = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel = "stylesheet">
    <script src = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <title>{% block title %}{% endblock %} | ClassFrame</title>
    <link rel = "icon" type = "image/x-icon" href = "/static/logo.png">
    {% block css %}{% endblock %}
    <style>
        @media only screen and (max-width: 1000px) {
            .w-75 {
                width: 100% !important;
            }

            .w-50 {
                width: 90% !important;
            }
        }
    </style>
</head>
<body class = "d-flex flex-column min-vh-100">
    <nav class = "navbar navbar-expand-lg navbar-light border-bottom">
        <div class = "container-fluid">
            <a class = "navbar-brand" href = "/">
                <img src = "/static/logo.png" alt = "" width = "24" height = "24" class = "d-inline-block align-text-top">
                &nbsp;ClassFrame
            </a>
            <button class = "navbar-toggler" type = "button" data-bs-toggle = "collapse" data-bs-target = "#toggle">
                <span class = "navbar-toggler-icon"></span>
            </button>
            <div class = "collapse navbar-collapse" id = "toggle">
                <ul class = "navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class = "nav-item">
                        <a class = "nav-link" href = "/home">Home</a>
                    </li>
                    {% if logged_in %}
                        <li class = "nav-item dropdown">
                            <a class = "nav-link dropdown-toggle" href = "#" data-bs-toggle = "dropdown">New</a>
                            <ul class = "dropdown-menu">
                                <button type = "button" class = "dropdown-item" data-bs-toggle = "modal" data-bs-target = "#new-classroom">Classroom</button>
                            </ul>
                        </li>
                    {% endif %}
                    <li class = "nav-item">
                        <a class = "nav-link" href = "/browse">Browse</a>
                    </li>
                    <li class = "nav-item">
                        <a class = "nav-link" href = "/me">Profile</a>
                    </li>
                    {% if logged_in %}
                        <li class = "nav-item">
                            <a class = "nav-link" href = "/logout">Log Out</a>
                        </li>
                    {% else %}
                        <li class = "nav-item">
                            <a class = "nav-link" href = "/login">Log In</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    <main class = "mx-5 my-5" id = "content">
        {% if not flash_off %}
            {% for message in get_flashed_messages() %}
                <div class = "alert alert-danger alert-dismissible fade show">
                    <strong>Error</strong> {{ message }}
                    <button type = "button" class = "btn-close" data-bs-dismiss = "alert"></button>
                </div>
            {% endfor %}
        {% endif %}
        {% block content %}{% endblock %}
    </main>
    <div class = "modal fade" id = "new-classroom" tabindex = "-1">
        <div class = "modal-dialog modal-dialog-centered">
            <div class = "modal-content">
                <div class = "modal-header">
                    <h5 class = "modal-title">New Classroom</h5>
                    <button type = "button" class = "btn-close" data-bs-dismiss = "modal" aria-label = "Close"></button>
                </div>
                <div class = "modal-body">
                    <form method = "POST" action = "/classrooms/new" class = "flex-column">
                        <div class = "form-group mb-4">
                            <label for = "name">Name</label>
                            <input type = "text" name = "name" class = "form-control" id = "name" required>
                        </div>
                        <button type = "submit" class = "btn btn-primary">Create</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class = "container mt-auto">
      <footer class = "d-flex flex-wrap justify-content-between align-items-center py-3 border-top">
        <p class = "col-md-4 mb-0 text-body-secondary">Copyright &copy; 2023 ClassFrame.</p>
        <a href = "/" class="col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
            <img src = "/static/logo.png" alt = "" width = "30" class = "d-inline-block align-text-top">
        </a>
        <ul class = "nav col-md-4 justify-content-end">
          <li class = "nav-item"><a href = "https://aarushgupta.com" class = "nav-link px-2 text-body-secondary">An Aarush Gupta Production.</a></li>
        </ul>
      </footer>
    </div>
    <script>
        function show_loader(href) {
            document.getElementById("content").innerHTML = "ooga booga";
            window.location.href = href
            return false;
        }
        //let links = document.body.getElementsByTagName("a");
        let links = [];
        for (let i = 0; i < links.length; i++) { 
            let link = links[i];
            let href = link.getAttribute("href");
            //link.setAttribute("onclick", `return show_loader("${href}");`);
        }
    </script>
</body>
</html>
